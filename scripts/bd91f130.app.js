var App=angular.module("repzio",["ngRoute","ngResource","ImageZoom"]);App.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.tpl",controller:"home"}).otherwise({redirectTo:"/"})}]),App.controller("home",["$scope","$resource",function(a,b){function c(a){var b=document.createElement("link");b.rel="shortcut icon",b.async=!0,b.href=a;var c=document.getElementsByTagName("link")[0];c.parentNode.insertBefore(b,c)}var d,e="TestProject.json",f=b(e);f.get(function(b){a.items=b.items,a.company={name:b.CompanyName,logo:"http://images.repzio.com/productimages/"+b.ManufacturerID+"/logo"+b.ManufacturerID+"_lg.jpg"},a.rep={name:b.SalesRep.FirstName+" "+b.SalesRep.LastName,email:b.SalesRep.EmailAddress,phone:b.SalesRep.Phone},c(a.company.logo)}),a.toggleDetails=function(b){d!==b?(a.showDetails=b,d=b):(d=null,a.showDetails=null)}}]);var ImageZoom=angular.module("ImageZoom",[]);ImageZoom.directive("imageZoom",["$document",function(a){return{restrict:"EA",replace:!0,templateUrl:"views/templates/image-zoom.html",scope:{imageSrc:"@"},link:function(b,c){var d,e,f,g,h=c.find("div"),i=c.find("img"),j=!1,k=!1,l=b.$parent.$watch("imageSrc",function(a){a&&(b.imageSrc=a)});if(!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)){var m=function(){h.css({opacity:0,filter:"alpha(opacity=0)",display:"none"}),j=!0},n=function(){h.css({display:"block",opacity:1,filter:"alpha(opacity=100)"})},o=function(a){h.css({background:"url("+a+") no-repeat","background-size":f+" "+e})},p=function(a){g=b.magnify(a),g&&h.css(g)},q=function(){m(),a.off("mousemove",p),a.off("mouseleave",q)};c.on("mouseenter",function(){j&&n();var e={width:c[0].offsetWidth,height:c[0].offsetHeight,imageWidth:i[0].offsetWidth,imageHeight:i[0].offsetHeight,lensWidth:h[0].offsetWidth,lensHeight:h[0].offsetHeight};d=angular.extend(b.getOffset(c[0]),e),a.on("mousemove",p),a.on("mouseleave",q)}),c.on("destroy",l),i.bind("load",function(){e=i.naturalWidth,f=i.naturalHeight,o(b.imageSrc)});var r=function(a){var b,c,g,h,i,j,k,b=a.pageX?a.pageX-d.left:a.x;return c=a.pageY?a.pageY-d.top:a.y,b<d.width&&c<d.height&&b>0&&c>0?(n(),g=-1*Math.round(b/d.width*e-d.lensWidth/2),h=-1*Math.round(c/d.height*f-d.lensHeight/2),k=g+"px "+h+"px",i=b-d.lensWidth/2,j=c-d.lensHeight/2,{left:i+"px",top:j+"px",backgroundPosition:k}):void m()};b.magnify=function(a){var c;return e||f?r(a):void(k||(c=new Image,c.onload=function(){e=c.width,f=c.height,k=!1},c.src=b.imageSrc,k=!0))},b.getOffset=function(a){var b=0,c=0;return a&&(isNaN(a.offsetLeft)||(b+=a.offsetLeft,c+=a.offsetTop),a=a.offsetParent),{left:b,top:c}},b.getLensStyle=function(){return{background:"url("+b.imageSrc+") no-repeat",width:b.lensWidth?b.lensWidth+"px":"",height:b.lensHeight?b.lensHeight+"px":""}}}}}}]),App.filter("newline",function(){return function(a){return-1!==a.indexOf(",")&&(a=a.substr(0,a.indexOf(","))),a}});